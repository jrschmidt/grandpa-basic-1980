// Generated by CoffeeScript 1.7.1
describe("Program Controller", function() {
  beforeEach(function() {
    this.prog = new ProgramController;
    this.line340 = {
      line_no: 340,
      command: "<print>",
      text: '340 PRINT "WELCOME TO GRANDPA BASIC 1980"',
      expression: [["<str>", "WELCOME TO GRANDPA BASIC 1980"]]
    };
    this.line345 = {
      line_no: 345,
      command: "<goto>",
      text: '345 GOTO 360',
      dest: 360
    };
    this.line350 = {
      line_no: 350,
      command: "<print>",
      text: '350 PRINT "THIS EMULATES THE EARLY"',
      expression: [["<str>", "THIS EMULATES THE EARLY"]]
    };
    this.line355 = {
      line_no: 355,
      command: "<goto>",
      text: '355 GOTO 370',
      dest: 370
    };
    this.line360 = {
      line_no: 360,
      command: "<print>",
      text: '360 PRINT "COMMAND LINE BASIC"',
      expression: [["<str>", "COMMAND LINE BASIC"]]
    };
    this.line365 = {
      line_no: 365,
      command: "<goto>",
      text: '365 GOTO 350',
      dest: 350
    };
    return this.line370 = {
      line_no: 370,
      command: "<print>",
      text: '370 PRINT "THAT WAS COMMON AROUND 1980"',
      expression: [["<str>", "THAT WAS COMMON AROUND 1980"]]
    };
  });
  it("should execute PRINT statements", function() {
    var lines;
    lines = {
      "340": this.line340
    };
    this.prog.load(lines);
    expect(this.prog.next_line_no).toEqual(340);
    this.prog.run_next_line();
    expect(this.prog.output).toEqual("WELCOME TO GRANDPA BASIC 1980");
    return expect(this.prog.next_line_no).toEqual(0);
  });
  it("should run more than one line", function() {
    var lines;
    lines = {
      "340": this.line340,
      "350": this.line350,
      "360": this.line360,
      "370": this.line370
    };
    this.prog.load(lines);
    expect(this.prog.next_line_no).toEqual(340);
    this.prog.run_next_line();
    expect(this.prog.output).toEqual("WELCOME TO GRANDPA BASIC 1980");
    expect(this.prog.next_line_no).toEqual(350);
    this.prog.run_next_line();
    expect(this.prog.output).toEqual("THIS EMULATES THE EARLY");
    expect(this.prog.next_line_no).toEqual(360);
    this.prog.run_next_line();
    expect(this.prog.output).toEqual("COMMAND LINE BASIC");
    expect(this.prog.next_line_no).toEqual(370);
    this.prog.run_next_line();
    expect(this.prog.output).toEqual("THAT WAS COMMON AROUND 1980");
    return expect(this.prog.next_line_no).toEqual(0);
  });
  return xit("should jump in response to GOTO commands", function() {
    var lines;
    lines = {
      "340": this.line340,
      "345": this.line345,
      "350": this.line350,
      "355": this.line365,
      "360": this.line360,
      "365": this.line365,
      "370": this.line370
    };
    this.prog.load(lines);
    expect(this.prog.next_line_no).toEqual(340);
    this.prog.run_next_line();
    expect(this.prog.output).toEqual("WELCOME TO GRANDPA BASIC 1980");
    expect(this.prog.next_line_no).toEqual(345);
    this.prog.run_next_line();
    expect(this.prog.next_line_no).toEqual(360);
    this.prog.run_next_line();
    expect(this.prog.output).toEqual("COMMAND LINE BASIC");
    this.prog.run_next_line();
    expect(this.prog.next_line_no).toEqual(365);
    this.prog.run_next_line();
    expect(this.prog.next_line_no).toEqual(350);
    this.prog.run_next_line();
    expect(this.prog.output).toEqual("THIS EMULATES THE EARLY");
    this.prog.run_next_line();
    expect(this.prog.next_line_no).toEqual(355);
    this.prog.run_next_line();
    expect(this.prog.next_line_no).toEqual(370);
    this.prog.run_next_line();
    expect(this.prog.output).toEqual("THAT WAS COMMON AROUND 1980");
    return expect(this.prog.next_line_no).toEqual(0);
  });
});
